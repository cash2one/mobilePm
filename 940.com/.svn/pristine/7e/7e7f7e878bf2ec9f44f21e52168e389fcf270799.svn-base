Fengs.add("940/utils/popBox",function(i,n){var t={init:function(){this.footer=n("#footer"),this.found(),this.j_touch=n("#j_touch"),this.j_sign=n("#j_sign"),this.sign_box=n("#sign_box"),this.close_sign=n("#close_sign"),this.gotop(),this.roll(),this.winBox(),this.submitInfo()},found:function(){var i=n("body"),t=n("#header").find(".wrap_nav"),s=n('<div id="headBox" class="minHead">').append(t.clone());s.find(".logo940").attr("src","/images/min_logo.png"),i.prepend(s);var a="<div id='j_touch'><a class='qq' href=''><span><i></i></span></a><a class='wx' href=''><span><i></i></span></a><a class='dh' href=''><span><i></i></span></a><a class='kf' href=''><span><i></i></span></a><a class='ew' href=''><span></span></a></div><div id='j_sign'></div><div id='sign_box'><div class='alert_box'><ul class='wrap_input'><li class='txt_title'><h1>开启电商成功之门</h1><p>拥有你的专业电商导师！</p></li><li class='sign_input'><div class='fl l_name'><i class='ico_name'>&#xe603;</i><span>姓名：</span></div><div class='fl r_input'><input type='text'></div></li><li class='sign_input'><div class='fl l_name'><i class='ico_phone'>&#xe604;</i><span>电话：</span></div><div class='fl r_input'><input type='text'></div></li><li class='sign_input'><div class='fl l_name'><i class='ico_qq'>&#xe6cb;</i><span>Q Q：</span></div><div class='fl r_input'><input type='text'></div></li><li class='but_enroll'><input type='button' value='立即报名'><p><span>免费入学，领取超值神秘大礼!</span><i></i></p></li><li class='but_sign'><span class='fl cancel'>稍后报名</span><a class='fr' href=''>在线咨询</a></li></ul><div id='hintBox'><span></span></div><div id='close_sign'>&#xe680;</div></div></div>";this.footer.after(a),n("script[src]").remove()},submitInfo:function(){function i(){return clearTimeout(p),p=setTimeout(function(){e.removeClass("error succ")},2e3),e.addClass("error")}var t={name:/^[\u4e00-\u9fa5a-zA-Z]{2,15}$/,tel:/(^0\d{2,3}-?\d{7,8}$)|(^1\d{10}$)/,qq:/^[1-9]{4,12}$/},s=this,a=n(".but_enroll input"),o=n(".sign_input"),e=n("#hintBox span"),p=null,l=function(){var p=o.eq(0).find("input").val(),l=o.eq(1).find("input").val(),c=o.eq(2).find("input").val(),d=i();t.name.test(p)?t.tel.test(l)?t.qq.test(c)?(a.val("正在加载中..."),n.getJSON("/enroll?user_name="+p+"&phone_number="+l+"&qq="+c,function(i){try{1==i.status?(e.removeClass("error").addClass("succ").html(i.tips),setTimeout(function(){s.sign_box.fadeOut(300),s.sign_box.find(".alert_box").animate({marginTop:"0px",height:"0px"},200,"easeOutSine"),e.removeClass("error succ"),o.find("input").val("")},1500)):d.html("服务器繁忙，请稍后再试！")}catch(n){d.html("服务器繁忙，请稍后再试！")}a.val("立即报名")})):d.html("QQ号码格式不正确"):d.html("电话号码格式不正确"):d.html("姓名格式有误")};a.click(l),n(document).keydown(function(i){o.find("input").is(":focus")&&13==i.keyCode&&l()})},roll:function(){function i(){var i=n(document).scrollTop();i>800?t.goTop.fadeIn(600):t.goTop.fadeOut(400),t.j_touch.stop().animate({top:(s.height()-t.j_touch.height())/2+i}),t.j_sign.stop().animate({top:(s.height()-t.j_touch.height())/2+i}),-[1]||o.addClass("ie8"),i>=300?navigator.userAgent.indexOf("MSIE 9.0")>0||!-[1]?o.stop(!0).animate({top:0},200):o.css({top:0}):navigator.userAgent.indexOf("MSIE 9.0")>0||!-[1]?o.stop(!0).animate({top:-65},200):o.stop(!0).removeAttr("style")}var t=this,s=n(window),a=n("#header"),o=(a.find(".wrap_head"),n("#advert"),n("#headBox"));s.on("scroll",function(){i()}),i()},winBox:function(){var i=this,t=n(".sign_input");n("#j_sign,.enroll,.v_st").on("click",function(){i.sign_box.fadeIn(),setTimeout(function(){i.sign_box.find(".alert_box").animate({marginTop:"-265px",height:"530px"},"easeOutSine"),t.eq(0).find("input").focus()},100)}),n("#close_sign,.cancel").on("click",function(){i.sign_box.fadeOut(),i.sign_box.find(".alert_box").animate({marginTop:"0px",height:"0px"},300,"easeOutSine")}),this.exe()},exe:function(){this.sign_box.find(".r_input input").focus(function(){n(this).parents("li").addClass("act")}),this.sign_box.find(".r_input input").blur(function(){n(this).parents("li").removeClass("act")}),this.j_touch.on("mouseenter","a",function(){var i=n(this).index(),t=2==i?170:150,s=n(this).find("span"),a=s.find("i");4>i?s.stop().animate({width:t,opacity:1},300):s.css({width:"127px"}).stop().animate({marginTop:"-75px",opacity:1}),a.stop().animate({marginLeft:0},300)}).on("mouseleave","a",function(){var i=n(this).index(),t=n(this).find("span"),s=t.find("i");4>i?t.stop().animate({width:0,left:0,opacity:0},300):t.css({width:"0px",marginTop:"-100px",opacity:0}),s.stop().animate({marginLeft:"-100px"},300)})},gotop:function(){var i=(n(document).scrollTop(),n("html,body"));this.goTop=n("<div>"),this.goTop.attr("id","goTop").css("display","none"),this.goTop.html("<i></i><span>回<br>到<br>顶<br>部</span>"),this.goTop.on("click",function(){i.animate({scrollTop:0})}),this.footer.after(this.goTop)}};t.init()});