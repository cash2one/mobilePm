Fengs.add("940/video/index",function(i,t){return{init:function(){var i=t(".tab_ul"),e=i.find(".cur");this.listUl=t(".wrap_vlist").find(".v_list_ul");var a=this;i.on("mouseover","li",function(){var i=t(this).index();e.animate({left:t(this).position().left+17},200),t(this).addClass("act").siblings("li").removeClass("act"),a.listUl.eq(i).show().siblings("ul").hide()}),this.getVideo()},getVideo:function(){function i(){var i="";t(this).siblings("p").length>0?(i=t(this).siblings("p").find("span").text(),c.animate({scrollTop:80},600)):i=this.innerHTML,d.html("正在播放："+i),document.title=i;var e=t(this).siblings("span");t.getJSON("/play",{v_id:this.vData},function(){e.text(Number(e.text())+1)}),o.file_id=this.vData,o.auto_play="1",new qcVideo.Player("id_video_container",o)}var e=this,a=t(".wrap_video"),s=t(".videoPage"),n=0,l=0,r={videos:function(i,a){t.getJSON("/videoList?type="+a+"&page=1&line=10",function(t){for(var a,s=t.list,n=s.length>10?10:s.length,l="",r=0;n>r;r++)a=3>r?"act":"",l+='<li><i class="fl '+a+'">'+(r+1)+'</i><a class="fl" href="javascript:">'+s[r].title+'</a><span class="fr" title="播放次数">'+s[r].click_num+"</span></li>";e.listUl.eq(i).html(l);for(var o=e.listUl.eq(i).find("li"),r=0;n>r;r++)o.eq(r).find("a")[0].vData=s[r].videoId})},vipFreeVideo:function(i,e,s,n){var l=this;t.getJSON("/videoList",{type:e,page:s,line:12},function(s){function r(i,t){var e=new Image;return e.src=i,e.complete?void t.call(e):void(e.onload=function(){t.call(e)})}var o=s.list,c="";if(1!=s.status)return void alert("服务器繁忙，请稍后在试！");for(var d=0;d<o.length;d++)c+='<li><a href="javascript:"><img width=175 height=120 data-src="'+o[d].preview+'" width=175 height=120 src="../images/loding.gif"><em class="v_bg"></em><i></i></a><p><em class="'+(1==e?"vip":"")+'">'+(1==e?"VIP":"免费")+"</em><i>|</i><span>"+o[d].title+"</span></p></li>";a.eq(i).html(c),a.eq(i).find("img").each(function(){var i=t(this);r(i.attr("data-src"),function(){i.attr("src",this.src),i.removeAttr("data-src")})});for(var v=a.eq(i).find("li"),d=0;d<o.length;d++)v.eq(d).find("a")[0].vData=o[d].videoId;n&&l.page(s.count,i,e)})},page:function(i,t,e){for(var a=Math.ceil(i/12),n="",l=0;a>l;l++)n+="<em "+(0==l?'class="act"':"")+">"+(l+1)+"</em>";s.eq(t).html(n),s.eq(t).attr("type",e)}};r.videos(0,3),r.videos(1,4),r.videos(2,1),r.vipFreeVideo(0,2,1,!0),r.vipFreeVideo(1,1,1,!0);var o={app_id:"1251672867",width:810,height:460,remember:"1",VMode:"opaque",stretch_patch:!0};e.listUl.on("click","a",i),a.on("click","a",i);var c=t("html,body"),d=t(".wrap_video_ul").find("h3");s.on("click","em",function(){var i=t(this).index(),e=t(this).parent().attr("type");if(1==e){if(n==i)return;n=i}else{if(l==i)return;l=i}t(this).addClass("act").siblings("em").removeClass("act");var a=i+1;r.vipFreeVideo(1==e?1:0,e,a,!1)})}}},["jquery/cookie"]);